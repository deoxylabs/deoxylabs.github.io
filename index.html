<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Handbook</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
  <link rel="shortcut icon" href="images/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">

  <!-- Theme colors for browser UI -->
  <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    /* Root gradient covers whole screen, including iOS bars */
    html {
      min-height: 100vh;
      width: 100%;
      background:
        radial-gradient(circle at 20% 30%, rgba(255,95,109,0.9) 0%, transparent 55%),
        radial-gradient(circle at 80% 20%, rgba(251,197,49,0.9) 0%, transparent 55%),
        radial-gradient(circle at 30% 70%, rgba(0,168,255,0.9) 0%, transparent 55%),
        radial-gradient(circle at 70% 80%, rgba(224,86,253,0.9) 0%, transparent 55%);
      background-size: cover;
      background-attachment: fixed;
      background-color: #000; /* fallback for dark */
    }
    @media (prefers-color-scheme: light) {
      html { background-color: #fff; }
    }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      overflow: hidden;
      position: relative;
      transition: color 0.3s ease;
      background: transparent; /* html provides bg */
      color: white;

      /* Respect safe areas for content */
      padding-bottom: env(safe-area-inset-bottom);
      padding-top: env(safe-area-inset-top);
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
    }
    @media (prefers-color-scheme: light) { body { color: black; } }

    /* Animated gradient overlay */
    .gradient {
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      z-index: -2;
      opacity: 0;
      background:
        radial-gradient(circle at 20% 30%, rgba(255,95,109,1) 0%, rgba(255,95,109,0.7) 25%, transparent 55%),
        radial-gradient(circle at 80% 20%, rgba(251,197,49,1) 0%, rgba(251,197,49,0.7) 25%, transparent 55%),
        radial-gradient(circle at 30% 70%, rgba(0,168,255,1) 0%, rgba(0,168,255,0.7) 25%, transparent 55%),
        radial-gradient(circle at 70% 80%, rgba(224,86,253,1) 0%, rgba(224,86,253,0.7) 25%, transparent 55%);
      background-size: cover;
      background-blend-mode: screen;
      animation:
        blobMove 30s ease-in-out infinite alternate,
        fadeInGradient 3s ease forwards;
    }
    @keyframes blobMove {
      0%   { transform: translate(0, 0) scale(1); }
      50%  { transform: translate(15%, -15%) scale(1.2); }
      100% { transform: translate(-15%, 15%) scale(1); }
    }
    @keyframes fadeInGradient { from { opacity: 0; } to { opacity: 1; } }

    /* Overlay tint */
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
    }
    @media (prefers-color-scheme: dark) {
      body::after { background: rgba(0,0,0,0.6); }
    }
    @media (prefers-color-scheme: light) {
      body::after {
        background: rgba(255,255,255,0.6);
        box-shadow: inset 0 0 0 100vw rgba(0,0,0,0.1);
      }
    }

    main {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1.2rem;
      max-width: 90%;
      animation: fadeInContent 2s ease;
    }
    @keyframes fadeInContent {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .logo {
      max-width: 200px;
      border-radius: 3rem;
      transform-style: preserve-3d;
      transition: transform 0.1s ease;
    }
    @media (hover: none) {
      .logo { animation: bounceMobile 6s ease-in-out infinite; }
    }
    @keyframes bounceMobile {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    h1 {
      font-weight: 700;
      font-size: 3rem;
      letter-spacing: 0.015em;
    }

    /* Countdown */
    #countdown {
      font-size: 2rem;
      font-weight: 300;
      text-shadow: 0 0 6px rgba(255,255,255,0.5);
      display: flex;
      gap: 0.5rem;
    }
    .count-part {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 3ch;
    }
    .count-number { display: inline-block; }
    .count-number.flip { animation: flipIn 0.5s ease; }
    @keyframes flipIn {
      0% { opacity: 0; transform: rotateX(90deg); }
      50% { opacity: 0.5; transform: rotateX(-20deg); }
      100% { opacity: 1; transform: rotateX(0); }
    }
    .count-label { font-size: 0.8rem; opacity: 0.7; }

    .tagline {
      font-family: 'BodoniTwelvePro', Georgia, serif;
      font-style: italic;
      font-size: 1.5rem;
      line-height: 1.3;
      max-width: 700px;
      opacity: 0;
      animation: fadeInWords 5s ease forwards;
    }
    @keyframes fadeInWords { from { opacity: 0; } to { opacity: 1; } }

    p { font-size: 1.2rem; line-height: 1.4; margin: 0; }

    /* TestFlight */
    .testflight {
      position: fixed;
      bottom: calc(120px + env(safe-area-inset-bottom));
      width: 100%;
      text-align: center;
      font-size: 0.95rem;
      font-weight: 300;
      opacity: 0.95;
      padding: 0.3rem 0;
    }
    .testflight a { color: inherit; text-decoration: none; font-weight: 400; }
    .testflight a:hover { text-decoration: underline; }

    /* Footer */
    footer {
      position: fixed;
      bottom: env(safe-area-inset-bottom);
      left: 0;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
      padding-bottom: calc(1rem + env(safe-area-inset-bottom));
      font-size: 0.85rem;
      font-weight: 300;
      opacity: 0.85;
    }
    footer img { height: 1em; width: auto; transition: transform 0.3s ease; }
    footer img:hover { transform: scale(1.2) rotate(5deg); }
    footer a { color: inherit; text-decoration: none; }
    footer a:hover { text-decoration: underline; }

    /* Disclaimer */
    .disclaimer-container {
      position: fixed;
      bottom: calc(70px + env(safe-area-inset-bottom));
      width: 100%;
      display: flex;
      justify-content: center;
      padding: 0 1rem;
    }
    .disclaimer-button,
    .disclaimer-content {
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 0.8rem 1.5rem;
      border-radius: 20px;
      font-size: 0.8rem;
      line-height: 1.4;
      max-width: 600px;
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .disclaimer-button { background: rgba(255,255,255,0.4); cursor: pointer; }
    .disclaimer-content {
      position: absolute;
      background: rgba(255,255,255,0.4);
      opacity: 0;
      transform: translateY(10px);
      pointer-events: none;
    }
    @media (prefers-color-scheme: dark) {
      .disclaimer-button, .disclaimer-content { background: rgba(0,0,0,0.4); color: white; }
    }
    @media (prefers-color-scheme: light) {
      .disclaimer-button, .disclaimer-content { background: rgba(255,255,255,0.4); color: black; }
    }
    .disclaimer-container.active .disclaimer-button {
      opacity: 0; transform: translateY(-10px); pointer-events: none;
    }
    .disclaimer-container.active .disclaimer-content {
      opacity: 1; transform: translateY(0); pointer-events: auto;
    }
  </style>
</head>
<body>
  <div class="gradient"></div>

  <main>
    <div class="logo-container">
      <img class="logo" src="https://github.com/deoxylabs/Handbook/blob/main/LightModeHandbookRounded.png?raw=true" alt="Handbook Logo" />
    </div>
    <h1>Handbook</h1>

    <div id="countdown">
      <div class="count-part"><span id="days" class="count-number">0</span><span class="count-label">days</span></div>
      <div class="count-part"><span id="hours" class="count-number">0</span><span class="count-label">hours</span></div>
      <div class="count-part"><span id="minutes" class="count-number">0</span><span class="count-label">min</span></div>
      <div class="count-part"><span id="seconds" class="count-number">0</span><span class="count-label">sec</span></div>
    </div>

    <p class="tagline">"Everything you need to know is about to shrink into your pocket."</p>
    <p>Available on iOS, iPadOS and macOS at launch.</p>
  </main>

  <!-- Disclaimer -->
  <div class="disclaimer-container">
    <div class="disclaimer-button">Important disclaimers</div>
    <div class="disclaimer-content">
      * All information subject to change prior to launch
    </div>
  </div>

  <!-- TestFlight -->
  <div class="testflight">
    Skip the queue and <a href="https://testflight.apple.com/join/8MRfZnPK" target="_blank">join the TestFlight</a>
  </div>

  <!-- Footer -->
  <footer>
    <span>Made by</span>
    <img src="https://github.com/deoxylabs/Handbook/blob/main/LithiumSoftwareLogo_v2.png?raw=true" alt="Lithium Software Logo" />
    â€” <a href="https://instagram.com/deoxylabs" target="_blank">View Instagram</a>
  </footer>

  <script>
    function animateNumber(el, newVal) {
      if (el.textContent !== String(newVal)) {
        el.textContent = newVal;
        el.classList.remove("flip");
        void el.offsetWidth;
        el.classList.add("flip");
      }
    }

    function updateCountdown() {
      const target = new Date("2025-12-01T00:00:00+10:00");
      const now = new Date();
      const diff = target - now;

      if (diff <= 0) {
        document.getElementById("countdown").textContent = "The wait is over!";
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      animateNumber(document.getElementById("days"), days);
      animateNumber(document.getElementById("hours"), hours);
      animateNumber(document.getElementById("minutes"), minutes);
      animateNumber(document.getElementById("seconds"), seconds);
    }
    updateCountdown();
    setInterval(updateCountdown, 1000);

    const container = document.querySelector('.disclaimer-container');
    container.addEventListener('click', () => {
      container.classList.toggle('active');
    });

    const logo = document.querySelector('.logo');
    let targetX = 0, targetY = 0, currentX = 0, currentY = 0;
    function animateLogo() {
      currentX += (targetX - currentX) * 0.25;
      currentY += (targetY - currentY) * 0.25;
      const scale = 1 + Math.min(Math.abs(currentX) + Math.abs(currentY), 50) / 600;
      logo.style.transform = `rotateX(${currentY}deg) rotateY(${currentX}deg) scale(${scale})`;

      const shadowX = currentX * -0.6;
      const shadowY = currentY * 0.6;
      const shadowBlur = 50 + (Math.abs(currentX) + Math.abs(currentY)) / 2;
      logo.style.boxShadow = `${shadowX}px ${shadowY}px ${shadowBlur}px rgba(0,0,0,0.35)`;

      requestAnimationFrame(animateLogo);
    }
    animateLogo();

    if (window.matchMedia("(hover: hover)").matches) {
      document.addEventListener("mousemove", (e) => {
        targetX = (e.clientX / window.innerWidth - 0.5) * 60;
        targetY = (e.clientY / window.innerHeight - 0.5) * -60;
      });
      document.addEventListener("mouseleave", () => { targetX = 0; targetY = 0; });
    }

    if (window.DeviceOrientationEvent) {
      window.addEventListener("deviceorientation", (event) => {
        const beta = event.beta || 0, gamma = event.gamma || 0;
        targetX = gamma / 2;
        targetY = beta / -2;
      }, true);
    }
  </script>
</body>
</html>
